<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AmmunIOT AI</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f5f7fa;
            text-align: center;
            padding-top: 50px;
        }

        h1 {
            color: #4a148c;
        }

        #data-card {
            background: white;
            margin: 20px auto;
            padding: 20px;
            width: 400px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-left: 8px solid #4a148c;
            text-align: left;
        }

        .anomaly {
            color: red;
            font-weight: bold;
        }

        .normal {
            color: green;
            font-weight: bold;
        }

        .label {
            font-weight: bold;
            color: #333;
        }
    </style>
</head>
<body>

<h1>AmmunnIOT AI</h1>
<h3>Real-Time Hospital IoT Traffic Anomaly Monitor</h3>

<div id="data-card">
    <p><span class="label">Device Name:</span> <span id="device_name">--</span></p>
    <p><span class="label">MAC Address:</span> <span id="mac_address">--</span></p>
    <p><span class="label">Packet Size:</span> <span id="packet_size">--</span> bytes</p>
    <p><span class="label">Protocol:</span> <span id="protocol">--</span></p>
    <p><span class="label">Status:</span> <span id="anomaly_status" class="normal">--</span></p>
</div>

<script>
    async function fetchData() {
        try {
            const res = await fetch("http://127.0.0.1:5000/latest");
            const data = await res.json();

            document.getElementById("device_name").textContent = data.device_name;
            document.getElementById("mac_address").textContent = data.mac_address;
            document.getElementById("packet_size").textContent = data.packet_size;
            document.getElementById("protocol").textContent = data.protocol;

            const anomalyEl = document.getElementById("anomaly_status");
            if (data.anomaly) {
                anomalyEl.textContent = "❗ Anomaly Detected";
                anomalyEl.className = "anomaly";
            } else {
                anomalyEl.textContent = "✅ Normal Traffic";
                anomalyEl.className = "normal";
            }

        } catch (error) {
            console.error("Error fetching data:", error);
        }
    }

    // Poll every 2 seconds
    setInterval(fetchData, 2000);
    fetchData(); // initial load
</script>

</body>
</html>
